---
import BaseLayout from '@/layouts/BaseLayout.astro';
import type { Locale } from '@/data/types';
import { getTranslationObject } from '@/utils/i18n';
import { languages, defaultLanguage } from '@/i18n/config';

export function getStaticPaths() {
  return languages.map((lang) => ({
    params: { lang },
  }));
}

const { lang: langParam } = Astro.params;
const lang: Locale = (langParam && languages.includes(langParam as Locale)) 
  ? (langParam as Locale) 
  : defaultLanguage;

const t = getTranslationObject(lang, 'tym');
const team = t.team || [];
---

<BaseLayout title={t.title} lang={lang}>
  <section class="section">
    <div class="section-header">
      <p class="eyebrow">{t.eyebrow}</p>
      <h2>{t.subtitle}</h2>
      <p class="subtitle">{t.description}</p>
    </div>
    <div class="grid">
      {team.map((member: any) => (
        <div class="card">
          <div class="speaker-avatar-large">
            <div class="avatar-placeholder-image"></div>
          </div>
          <h3>{member.name}</h3>
          <p class="modal-company">{member.role} Â· {member.company}</p>
          <p class="modal-description">{member.bio}</p>
          {(member.email || member.links) && (
            <div class="modal-links" style="margin-top: 1rem;">
              {member.email && <a href={`mailto:${member.email}`}>Email</a>}
              {member.links?.web && <a href={member.links.web} target="_blank" rel="noopener noreferrer">Web</a>}
              {member.links?.twitter && <a href={`https://twitter.com/${member.links.twitter.replace('@', '')}`} target="_blank" rel="noopener noreferrer">Twitter</a>}
              {member.links?.linkedin && <a href={`https://www.linkedin.com/in/${member.links.linkedin}`} target="_blank" rel="noopener noreferrer">LinkedIn</a>}
              {member.links?.github && <a href={`https://github.com/${member.links.github}`} target="_blank" rel="noopener noreferrer">GitHub</a>}
            </div>
          )}
        </div>
      ))}
    </div>
  </section>
</BaseLayout>

