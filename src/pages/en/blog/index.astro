---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { frontKonData } from '@/data/frontkon-data';
import type { Locale } from '@/data/types';
import { getText } from '@/utils/content';

const lang: Locale = 'en';
const posts = frontKonData.blogPosts;
const base = import.meta.env.BASE_URL || '/';
const pref = (path: string) => `${base.replace(/\/$/, '')}${path}`;
---

<BaseLayout title="Blog" lang={lang}>
  <section class="section">
    <div class="section-header">
      <p class="eyebrow">Blog</p>
      <h2>FrontKon updates</h2>
      <p class="subtitle">Short notes from the organizing crew.</p>
    </div>
    <div class="grid">
      {posts.map((post) => (
        <a class="card card-link" href={pref(`/en/blog/${post.id}/`)}>
          <h3>{getText(post.title, lang)}</h3>
          <p class="list-meta">{post.date}</p>
          <p class="modal-description">{getText(post.perex, lang)}</p>
          <span class="nav-button">Read</span>
        </a>
      ))}
    </div>
  </section>
</BaseLayout>

