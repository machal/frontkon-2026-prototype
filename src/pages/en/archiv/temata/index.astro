---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { frontKonData } from '@/data/frontkon-data';
import type { Locale } from '@/data/types';
import { getText } from '@/utils/content';

const lang: Locale = 'en';
const base = import.meta.env.BASE_URL || '/';
const pref = (path: string) => `${base.replace(/\/$/, '')}${path}`;
---

<BaseLayout title="Topics archive" lang={lang}>
  <section class="section">
    <div class="section-header">
      <p class="eyebrow">Archive</p>
      <h2>Topics 2020â€“2026</h2>
      <p class="subtitle">Jump to talks by topic.</p>
    </div>
    <div class="grid">
      {frontKonData.topics.map((topic) => {
        const count = frontKonData.talks.filter((t) => t.topicIds.includes(topic.id)).length;
        return (
          <a class="card card-link" href={pref('/en/archiv/prednasky/')}>
            <h3>{getText(topic.name, lang)}</h3>
            <p class="modal-description">{count} talks</p>
          </a>
        );
      })}
    </div>
  </section>
</BaseLayout>

